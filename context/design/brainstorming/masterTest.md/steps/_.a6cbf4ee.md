---
timestamp: 'Wed Oct 15 2025 09:03:55 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251015_090355.09eb9bce.md]]'
content_id: a6cbf4eeff57f1feafc89e5529eaf79fd0456591f878356de37f93dee793a0a1
---

# Test implementation

While testing, use the `testDb` function, which returns a tuple of the database and client so that you can close it.

```typescript
import { testDb } from "@utils/database.ts";

Deno.test("...", async () => {
  const [db, client] = await testDb();

  // ... tests

  await client.close();
});
```

The database is already automatically dropped before every test file using the `Deno.test.beforeAll` hook: do not include any additional manipulation of the database for this purpose.

Use the Deno.test framework, splitting by appropriate test steps and describing each behavior. Import helpers from:

```typescript
import { assertEquals } from "jsr:@std/assert"; // or any other utility from the library
```

Giani@Giani-Alvezs-MacBook-Air MenuManager % deno test
running 0 tests from ./src/concepts/MenuManager/MenuManagerConcept.test.ts
Uncaught error from ./src/concepts/UserAuthentication/UserAuthenticationConcept.test.ts FAILED

ERRORS

./src/concepts/UserAuthentication/UserAuthenticationConcept.test.ts (uncaught error)
error: (in promise) NotCapable: Requires read access to ".env", run again with the --allow-read flag
return parse(Deno.readTextFileSync(filepath));
^
at Object.readTextFileSync (ext:deno\_fs/30\_fs.js:785:10)
at parseFileSync (https://jsr.io/@std/dotenv/0.225.2/mod.ts:233:23)
at loadSync (https://jsr.io/@std/dotenv/0.225.2/mod.ts:69:26)
at https://jsr.io/@std/dotenv/0.225.2/load.ts:11:3
This error was not caught from a test and caused the test runner to fail on the referenced module.
It most likely originated from a dangling promise, event/timeout handler or top-level code.

FAILURES

./src/concepts/UserAuthentication/UserAuthenticationConcept.test.ts (uncaught error)

FAILED | 0 passed | 1 failed (51ms)

error: Test failed
