---
timestamp: 'Fri Oct 24 2025 08:54:49 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251024_085449.a9d8ad2e.md]]'
content_id: 6fcd81bcd43dc15b48cfe5a9ede31da5eaa08119f33d94fde9e356884a21fb54
---

# Commenting

Every action should have a comment including its signature, its requirements, and effects:

```typescript
  /**
   * createLabel (name: String): (label: Label)
   *
   * **requires** no Label with the given `name` already exists
   *
   * **effects** creates a new Label `l`; sets the name of `l` to `name`; returns `l` as `label`
   */
```

## WeeklyCart

**concept** WeeklyCart \[User, Menu]

**purpose** Organize menus for a specific week into a coherent cart for a user.

**principle** A user `createCart` for the week starting "Sunday, Jan 1" by providing any day within that week, e.g., "Monday, Jan 2". They then `addMenuToCart` for "Monday Dinner" and "Wednesday Lunch". If "Wednesday Lunch" menu is later removed (e.g., due to cancellation), they `removeMenuFromCart`.

**state**\
  a set of Cart with // must be no overlap in cart dates\
    a startDate Date // Conform to 'YYYY-MM-DD', date-only type no time, always a Sunday for the week the cart represents\
    an endDate Date // Conform to 'YYYY-MM-DD', date-only type no time, always the Saturday of the same week as startDate\
    an owner User // Reference to an external User entity\
    a menus Set of Menu\\

**actions**\
  createCart (dateInWeek: Date, owner: User): (cart: Cart)\
    **requires** the current system date is before `dateInWeek`, `owner` exists. No other `Cart` exists for this `owner` for the week containing `dateInWeek`.\
    **effects** Calculates the `startDate` as the Sunday of the week containing `dateInWeek` and `endDate` as the Saturday of the same week. Creates a new `Cart` with this `startDate`, `endDate`, and `owner`. It will have an empty set of `menus`. Ownership authorizations will be done via syncs.

  deleteCart (dateInWeek: Date): (cart: Cart)\
    **requires** there exists a cart whose `startDate` and `endDate` range *contains* `dateInWeek`. Ownership authorizations will be done via syncs.\
    **effects** Deletes `cart`.

  addMenuToCart (menu: Menu, menuDate: Date): (cart: Cart)\
    **requires** `menu` exists. Ownership authorizations will be done via syncs.\
    **effects** Adds `menu` to `cart` whose `startDate` and `endDate` range *contains* `dateInWeek`. If such a cart doesn't exist, a createCart for that date and then add `menu` to the new cart. Return `cart` menu was added to.

  removeMenuFromCart (menu: Menu): (cart: Cart)\
    **requires** `menu` exists in a `cart.menus`. Ownership authorizations will be done via syncs.\
    **effects** Removes `menu` from `cart.menus`. Return `cart` that menu was removed from.

**queries**\
  \_getCartDates (cart: Cart): (startDate: Date, endDate: Date)\
    **requires** `cart` exists.\
    **effects** Returns `cart` `startDate` and `endDate`.

  \_getCartOwner (cart: Cart): (owner: User)\
    **requires** `cart` exists.\
    **effects** Returns `owner` of the `cart`.

  \_getMenusInCart (cart: Cart): (menus: Set of Menu)\
    **requires** `cart` exists.\
    **effects** Returns the set of all `Menu` IDs associated with the given `cart`.

  \_getCartByDate (date: Date): (cart: Cart)\
    **requires** `date` is a valid date.\
    **effects** Returns the `cart` for that contains `date` between `cart.startDate` and `cart.endDate`. If no such cart exists returns empty.
