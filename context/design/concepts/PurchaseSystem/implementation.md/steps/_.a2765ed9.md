---
timestamp: 'Tue Oct 28 2025 18:17:53 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251028_181753.95348c75.md]]'
content_id: a2765ed9bb60f55fdfbbe228d72c505bedc363c04443ee401ce68a09f97712c7
---

# The implementation above to calculateOptimalPurchase is very long and complex and should be simplified. By traversing down from rootOrder all we do is find total amount of each SelectOrder, that way we can figure out the optimal AtomicOrder for each one. As we go down from the rootOrder set the cost for each order to zero, that way we know it hasn't been calculated. Then it is simple, do a PostOrder traversal from the rootOrder calculated costs. Either scale costs of children that are non zero or add to the cost necessary from SelectOrder now knowiong AtomicOrder.
