---
timestamp: 'Thu Oct 23 2025 19:10:48 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251023_191048.b5f6d009.md]]'
content_id: 2d25aac1bd5ea00c077f5d0feb9295e6b0d4b4896fd31e2bc0425cb0230ab86f
---

# Commenting

Every action should have a comment including its signature, its requirements, and effects:

```typescript
  /**
   * createLabel (name: String): (label: Label)
   *
   * **requires** no Label with the given `name` already exists
   *
   * **effects** creates a new Label `l`; sets the name of `l` to `name`; returns `l` as `label`
   */
```

## StoreCatalog

**concept** StoreCatalog \[AtomicOrder, SelectOrder]

**purpose** Manage a comprehensive catalog of purchasable ingredients, their alternative names, and available purchase options across different stores.

**principle** An administrator `createItem` for a new ingredient like "ground pepper". They then discover multiple `PurchaseOption`s for it, such as "3 lbs for $5.99 at Sprout's" and "1 lb for $2.50 at Trader Joe's", and `addPurchaseOption` for each. Later, another user refers to "pepper", so the administrator `addItemName` "pepper" as an alias. Once verified, the administrator `confirmItem` so it can be used in orders.

**state**\
  a set of Item with\
    a names Set of String // Ex. {'pepper', 'ground pepper', 'course pepper'}\
    a purchaseOptions Set of PurchaseOption\
    a purchase SelectOrder\
  a set of PurchaseOption with\
    a store String // Ex. "Sprout's"\
    a quantity Float // Ex. 3.0\
    a units String // Ex. "lbs", "oz", "count"\
    a price Float // Ex. 5.99\
    a confirmed Bool\
    a purchase AtomicOrder\\

**actions**\
  createItem (primaryName: String): (item: Item)\
    **requires** no Item already exists with `primaryName` in its names set.\
    **effects** Creates a new `Item` with `primaryName` in its `names` set and no empty `purchaseOptions`. Returns the new `Item` ID.

  deleteItem (item: Item)\
    **requires** `item` exists.\
    **effects** Removes `item` from the catalog. Also removes all `PurchaseOption`s where `purchaseOption.item` is `item`.

  addPurchaseOption (item: Item, quantity: Float, units: String, price: Float, store: String): (purchaseOption: PurchaseOption)\
    **requires** `item` exists. `quantity` > 0, `price` >= 0.\
    **effects** Adds a new `purchaseOption` to `item.purchaseOptions` set with the specified details. Returns the new `PurchaseOption` ID.

  updatePurchaseOption (purchaseOption: PurchaseOption, quantity: Float)\
  updatePurchaseOption (purchaseOption: PurchaseOption, units: String)\
  updatePurchaseOption (purchaseOption: PurchaseOption, price: Float)\
  updatePurchaseOption (purchaseOption: PurchaseOption, store: String)\
  updatePurchaseOption (purchaseOption: PurchaseOption, order: Order)\
    **requires** `purchaseOption` exists. `quantity` > 0, `price` >= 0 for respective updates.\
    **effects** Updates the specified attribute of the `purchaseOption`.

  removePurchaseOption (item: Item, purchaseOption: PurchaseOption)\
    **requires** `item` exists, `purchaseOption` is associated with `item`.\
    **effects** Removes `purchaseOption` from `item`'s associated `PurchaseOption`s.

  addItemName (item: Item, name: String)\
    **requires** `item` exists, `name` is not already an alias for `item` (i.e., not in `item.names`).\
    **effects** Adds `name` to the `names` set of `item`.

  removeItemName (item: Item, name: String)\
    **requires** `item` exists, `name` is in the `names` set of `item`, and `name` is not the only name for the `item`.\
    **effects** Removes `name` from the `names` set of `item`.

  confirmPurchaseOption (purchaseOption: PurchaseOption)\
    **requires** `purchaseOption` exists, `purchaseOption` is not already `confirmed`.\
    **effects** Sets `purchaseOption.confirmed` to `true`.

**queries**
  \_getItemByName (name: String): (item: Item)\
    **requires** An item exists with `name` in its `names` set.\
    **effects** Returns the `Item` ID with the given name.

  \_getItemByPurchaseOption (purchaseOption: PurchaseOption): (item: Item)\
    **requires** An item exists with `purchaseOption` in its `purchaseOption` set.\
    **effects** Returns the `Item` ID with the given purchaseOption.

  \_getItemNames (item: Item): (names: Set of String)\
    **requires** `item` exists.\
    **effects** Returns the associated details of the item.

  \_getItemPurchaseOptions (item: Item): (purchaseOptions: Set of PurchaseOption)\
    **requires** `item` exists.\
    **effects** Returns the set of all `PurchaseOption`s for the given `item`.

  \_getPurchaseOptionDetails (purchaseOption: PurchaseOption): (quantity: Float, units: String, price: Float, store: String, confirmed: Bool)\
    **requires** `purchaseOption` exists.\
    **effects** Returns the set of details given `purchaseOption`.

  \_getAllItems (): (items: Set of Item)\
    **requires** nothing.\
    **effects** Returns a set of all `Item` entity IDs.
